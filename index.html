<title>ğŸ””ì½”ì¸ ì•ŒëŒë©ğŸ””</title>
<h2>ğŸ””ì½”ì¸ ì•ŒëŒë©ğŸ””</h2><!-- ê±°ë˜ì†Œ ì„ íƒ --><label for="exchange">ê±°ë˜ì†Œ ì„ íƒ</label> <select id="exchange">

  <option>ë°”ì´ë‚¸ìŠ¤</option>
  <option>ì—…ë¹„íŠ¸</option>
  <option>ë¹„íŠ¸ê²Ÿ</option>
</select><!-- ì½”ì¸ ì„ íƒ --><label for="symbol">ì½”ì¸ ì„ íƒ</label> <select id="symbol">

  <option>ë¹„íŠ¸ì½”ì¸ (BTC)</option>
  <option>ì´ë”ë¦¬ì›€ (ETH)</option>
  <option>ì†”ë¼ë‚˜ (SOL)</option>
</select><p id="price">í˜„ì¬ê°€: -</p><label for="target">ì„¤ì •ê°€</label> <input id="target" placeholder="ì˜ˆ: 30000" />

<label for="condition">ì•Œë¦¼ ì¡°ê±´</label> <select id="condition">

  <option>ì„¤ì •ê°€ ì´ìƒ ë„ë‹¬ ì‹œ</option>
  <option>ì„¤ì •ê°€ ì´í•˜ ë„ë‹¬ ì‹œ</option>
</select><label for="repeat">ì•Œë¦¼ ì£¼ê¸°</label> <select id="repeat">

  <option>í•œ ë²ˆë§Œ ì•Œë¦¼</option>
  <option>ë‚´ê°€ ëŒ ë•Œê¹Œì§€</option>
</select><label for="interval">ë°˜ë³µ ê°„ê²© (ì´ˆ)</label> <input id="interval" value="10" />

<label for="sound">ì•Œë¦¼ ì‚¬ìš´ë“œ</label> <select id="sound">

  <option>ğŸ”” ê¸°ë³¸ ë²¨ì†Œë¦¬</option>
</select><button onclick="registerAlert()">ë“±ë¡</button>

<ul id="alerts"></ul><script>
const exchangeEl = document.getElementById('exchange');
const symbolEl = document.getElementById('symbol');
const priceEl = document.getElementById('price');

async function fetchPrice() {
  const exchange = exchangeEl.value;
  const symbolMap = {
    'ë¹„íŠ¸ì½”ì¸ (BTC)': 'BTC',
    'ì´ë”ë¦¬ì›€ (ETH)': 'ETH',
    'ì†”ë¼ë‚˜ (SOL)': 'SOL'
  };
  const symbol = symbolMap[symbolEl.value];

  try {
    let url = '';
    if (exchange === 'ë°”ì´ë‚¸ìŠ¤') {
      url = `https://api.binance.com/api/v3/ticker/price?symbol=${symbol}USDT`;
    } else if (exchange === 'ì—…ë¹„íŠ¸') {
      const market = `KRW-${symbol}`;
      url = `https://api.allorigins.win/raw?url=${encodeURIComponent(`https://api.upbit.com/v1/ticker?markets=${market}`)}`;
    } else if (exchange === 'ë¹„íŠ¸ê²Ÿ') {
      url = `https://api.bitget.com/api/spot/v1/market/ticker?symbol=${symbol}USDT`;
    }

    const res = await fetch(url);
    const data = await res.json();
    let price = '-';
    if (exchange === 'ë°”ì´ë‚¸ìŠ¤') price = parseFloat(data.price).toLocaleString();
    if (exchange === 'ì—…ë¹„íŠ¸') price = parseFloat(data[0].trade_price).toLocaleString();
    if (exchange === 'ë¹„íŠ¸ê²Ÿ') price = parseFloat(data.data.close).toLocaleString();

    const unit = exchange === 'ì—…ë¹„íŠ¸' ? 'KRW' : 'USDT';
    priceEl.innerText = `í˜„ì¬ê°€: ${price} ${unit}`;
  } catch (e) {
    priceEl.innerText = 'í˜„ì¬ê°€: - (ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨)';
  }
}

setInterval(fetchPrice, 5000);
exchangeEl.addEventListener('change', fetchPrice);
symbolEl.addEventListener('change', fetchPrice);
fetchPrice();
</script>
