<!DOCTYPE html><html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ””ì½”ì¸ ì•ŒëŒë©ğŸ””</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 20px; background: #f9f9f9; }
    h2 { text-align: center; color: #6a5acd; }
    label { display: block; margin-top: 15px; font-weight: bold; }
    select, input[type="number"], input[type="file"] {
      width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 8px;
    }
    .button-group { text-align: center; margin-top: 20px; }
    button { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; }
    #register-btn { background-color: #6a5acd; color: white; }
    #result, #alert-list { margin-top: 20px; font-weight: bold; text-align: center; }
    .alert-item {
      margin: 5px auto; background: #eee; padding: 10px; border-radius: 6px;
      width: 90%; display: flex; justify-content: space-between; align-items: center;
    }
    .delete-btn { background-color: #ff4d4d; color: white; border: none;
      padding: 5px 10px; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <h2>ğŸ””ì½”ì¸ ì•ŒëŒë©ğŸ””</h2><label for="exchange">ê±°ë˜ì†Œ ì„ íƒ</label> <select id="exchange"> <option value="binance">ë°”ì´ë‚¸ìŠ¤</option> <option value="upbit">ì—…ë¹„íŠ¸</option> <option value="bitget">ë¹„íŠ¸ê²Ÿ</option> </select>

<label for="symbol">ì½”ì¸ ì„ íƒ</label> <select id="symbol"> <option value="BTCUSDT">ë¹„íŠ¸ì½”ì¸ (BTC)</option> <option value="ETHUSDT">ì´ë”ë¦¬ì›€ (ETH)</option> <option value="SOLUSDT">ì†”ë¼ë‚˜ (SOL)</option> <option value="XRPUSDT">ë¦¬í”Œ (XRP)</option> <option value="ADAUSDT">ì—ì´ë‹¤ (ADA)</option> </select>

  <p id="current-price">í˜„ì¬ê°€: -</p><label for="target-price">ì„¤ì •ê°€</label> <input type="number" id="target-price" placeholder="ì˜ˆ: 30000">

<label for="condition">ì•Œë¦¼ ì¡°ê±´</label> <select id="condition"> <option value="over">ì„¤ì •ê°€ ì´ìƒ ë„ë‹¬ ì‹œ</option> <option value="under">ì„¤ì •ê°€ ì´í•˜ ë„ë‹¬ ì‹œ</option> </select>

<label for="frequency">ì•Œë¦¼ ì£¼ê¸°</label> <select id="frequency"> <option value="once">í•œ ë²ˆë§Œ ì•Œë¦¼</option> <option value="repeat">ì¡°ê±´ ë§Œì¡±í•  ë•Œë§ˆë‹¤ ì•Œë¦¼</option> <option value="interval-1m">1ë¶„ë§ˆë‹¤ ì•Œë¦¼</option> <option value="interval-5m">5ë¶„ë§ˆë‹¤ ì•Œë¦¼</option> <option value="until-off">ë‚´ê°€ ëŒ ë•Œê¹Œì§€</option> </select>

<label for="repeat-interval">ë°˜ë³µ ê°„ê²© (ì´ˆ)</label> <input type="number" id="repeat-interval" value="10">

<label for="sound-select">ì•Œë¦¼ ì‚¬ìš´ë“œ</label> <select id="sound-select"> <option value="1">ğŸ”” ê¸°ë³¸ ë²¨ì†Œë¦¬</option> <option value="2">ğŸš¨ ê²½ê³  ì•ŒëŒ</option> <option value="3">ğŸ“¢ ì‚¬ì´ë Œ</option> <option value="custom">ğŸµ ë‚´ íŒŒì¼ ì—…ë¡œë“œ</option> </select> <input type="file" id="custom-sound" accept="audio/*" style="display:none;">

  <div class="button-group">
    <button id="register-btn">ë“±ë¡</button>
  </div>  <div id="result"></div>
  <div id="alert-list"></div><audio id="sound-1" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3"></audio> <audio id="sound-2" src="https://www.soundjay.com/button/sounds/beep-07.mp3"></audio> <audio id="sound-3" src="https://www.soundjay.com/button/sounds/beep-10.mp3"></audio>

  <script>
    const symbolSelect = document.getElementById('symbol');
    const exchangeSelect = document.getElementById('exchange');
    const priceLabel = document.getElementById('current-price');
    let currentSymbol = symbolSelect.value;
    let currentExchange = exchangeSelect.value;

    const bitgetSymbols = {
      BTCUSDT: 'BTCUSDT_SPBL',
      ETHUSDT: 'ETHUSDT_SPBL',
      SOLUSDT: 'SOLUSDT_SPBL',
      XRPUSDT: 'XRPUSDT_SPBL',
      ADAUSDT: 'ADAUSDT_SPBL'
    };

    async function fetchCurrentPrice() {
      const symbol = currentSymbol;
      const exchange = currentExchange;
      try {
        let priceVal;
        if (exchange === 'binance') {
          const res = await fetch(`https://api.binance.com/api/v3/ticker/price?symbol=${symbol}`);
          const data = await res.json();
          priceVal = parseFloat(data.price);
        } else if (exchange === 'upbit') {
          const market = `KRW-${symbol.replace('USDT','')}`;
          // corsproxy.ioë¥¼ í†µí•œ CORS ìš°íšŒ (ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ì— ì§ì ‘ URL ì „ë‹¬)
          const proxyUrl = `https://corsproxy.io/?https://api.upbit.com/v1/ticker?markets=${market}`;
          const res = await fetch(proxyUrl);
          const data = await res.json();
          // Upbit ticker APIëŠ” ë°°ì—´ ë°˜í™˜
          priceVal = parseFloat(data[0].trade_price);
        } else {
          const market = bitgetSymbols[symbol];
          const res = await fetch(`https://api.bitget.com/api/spot/v1/market/ticker?symbol=${market}`);
          const data = await res.json();
          priceVal = parseFloat(data.data.close);
        }
        priceLabel.innerText = `í˜„ì¬ê°€: ${priceVal.toLocaleString()} ${currentExchange==='upbit'?'KRW':'USDT'}`;
      } catch (e) {
        console.error(e);
        priceLabel.innerText = 'í˜„ì¬ê°€: - (ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨)';
      }
    }

    exchangeSelect.addEventListener('change', () => {
      currentExchange = exchangeSelect.value;
      fetchCurrentPrice();
    });
    symbolSelect.addEventListener('change', () => {
      currentSymbol = symbolSelect.value;
      fetchCurrentPrice();
    });

    window.addEventListener('load', () => {
      fetchCurrentPrice();
      setInterval(fetchCurrentPrice, 5000);
    });
  </script></body>
</html>
