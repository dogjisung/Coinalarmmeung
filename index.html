<title>🔔코인 알람멍🔔</title>
<h2>🔔코인 알람멍🔔</h2><!-- 거래소 선택 --><label for="exchange">거래소 선택</label> <select id="exchange">

  <option>바이낸스</option>
  <option>업비트</option>
  <option>비트겟</option>
</select><!-- 코인 선택 --><label for="symbol">코인 선택</label> <select id="symbol">

  <option>비트코인 (BTC)</option>
  <option>이더리움 (ETH)</option>
  <option>솔라나 (SOL)</option>
</select><p id="price">현재가: -</p><label for="target">설정가</label> <input id="target" placeholder="예: 30000" />

<label for="condition">알림 조건</label> <select id="condition">

  <option>설정가 이상 도달 시</option>
  <option>설정가 이하 도달 시</option>
</select><label for="repeat">알림 주기</label> <select id="repeat">

  <option>한 번만 알림</option>
  <option>내가 끌 때까지</option>
</select><label for="interval">반복 간격 (초)</label> <input id="interval" value="10" />

<label for="sound">알림 사운드</label> <select id="sound">

  <option>🔔 기본 벨소리</option>
</select><button onclick="registerAlert()">등록</button>

<ul id="alerts"></ul><script>
const exchangeEl = document.getElementById('exchange');
const symbolEl = document.getElementById('symbol');
const priceEl = document.getElementById('price');

async function fetchPrice() {
  const exchange = exchangeEl.value;
  const symbolMap = {
    '비트코인 (BTC)': 'BTC',
    '이더리움 (ETH)': 'ETH',
    '솔라나 (SOL)': 'SOL'
  };
  const symbol = symbolMap[symbolEl.value];

  try {
    let url = '';
    if (exchange === '바이낸스') {
      url = `https://api.binance.com/api/v3/ticker/price?symbol=${symbol}USDT`;
    } else if (exchange === '업비트') {
      const market = `KRW-${symbol}`;
      url = `https://api.allorigins.win/raw?url=${encodeURIComponent(`https://api.upbit.com/v1/ticker?markets=${market}`)}`;
    } else if (exchange === '비트겟') {
      url = `https://api.bitget.com/api/spot/v1/market/ticker?symbol=${symbol}USDT`;
    }

    const res = await fetch(url);
    const data = await res.json();
    let price = '-';
    if (exchange === '바이낸스') price = parseFloat(data.price).toLocaleString();
    if (exchange === '업비트') price = parseFloat(data[0].trade_price).toLocaleString();
    if (exchange === '비트겟') price = parseFloat(data.data.close).toLocaleString();

    const unit = exchange === '업비트' ? 'KRW' : 'USDT';
    priceEl.innerText = `현재가: ${price} ${unit}`;
  } catch (e) {
    priceEl.innerText = '현재가: - (불러오기 실패)';
  }
}

setInterval(fetchPrice, 5000);
exchangeEl.addEventListener('change', fetchPrice);
symbolEl.addEventListener('change', fetchPrice);
fetchPrice();
</script>
